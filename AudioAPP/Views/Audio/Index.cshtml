@model IEnumerable<AudioAPP.Models.Audio>
@inject UserManager<IdentityUser> UserManager
@using Microsoft.AspNetCore.Identity
@{
}
<h1 class="text-uppercase m-1">Pliki MP3</h1>

<div class="container border p-2 list-group" style="width:100%">


    @foreach (var audio in @Model)
    {


        <div class="container m-2 p-2 border rounded">
            @if(User.Identity.IsAuthenticated)
            {
                <a asp-action="Edit" asp-route-id="@audio.AudioId">Edit</a> 
                <l>|</l>
                <a asp-action="Remove" asp-route-id="@audio.AudioId">Delete</a>  
            }

            <h2 class="text-center">@audio.Title</h2>

            @if (!String.IsNullOrEmpty(@audio.Image))
            {
                var image_path = $"/Image/{@audio.Image}";
                <h2 class="text-center">
                <image src= @image_path  Width="300" Height="220" />
                </h2>
            }
           @if (!String.IsNullOrEmpty(@audio.Sound))
            {
                var sound_path = $"/Sound/{@audio.Sound}";
                 <h2 class="text-center">
                <audio controls src = @sound_path/>
                </h2>
            }

            <div class = "comment-section">
                    <a button asp-action="Comment" class="btn btn-primary"  asp-route-id="@audio.AudioId" >Skomentuj</a>
                    <a button asp-action="CommentDetails" class="btn btn-primary"  asp-route-id="@audio.AudioId" >Sprawdz Komentarze</a>
            </div>

            <div class="text-center">
            @audio.Description</div>
            <div class="text-right">
            Created:
            @audio.Created</div>
            Author:

            @if (@audio.Comments is not null)
            {
               @foreach (var item in @audio.Comments)
               {
                <p>
                   @item.Message
                </p>
               }
            }
        </div>
        
    }

</>